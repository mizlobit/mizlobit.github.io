<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DEMAKOV_AI_AVATAR — цифровые клоны и продакшн контента</title>
<meta name="description" content="Цифровые клоны, которые ускоряют производство контента: аватар, сценарии, монтаж, генерация и сопровождение." />
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2242%22 fill=%22%230af%22/></svg>">

<style>
:root{
  --bg:#03060a; --bg2:#051019; --card:#0a121a; --muted:#8aa0bb; --text:#eaf2ff;
  --neon:#66e1ff; --neon2:#22c55e; --accent:#a5f3fc;
  --rad:20px; --shadow:0 12px 40px rgba(0,0,0,.45);
  --wrap:1320px;
}
*{box-sizing:border-box}
html,body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
body{
  color:var(--text);
  background:
    radial-gradient(1200px 700px at 15% -10%, rgba(102,225,255,.10), transparent 55%),
    radial-gradient(1000px 600px at 110% -10%, rgba(34,197,94,.08), transparent 55%),
    linear-gradient(180deg, var(--bg), var(--bg2) 50%, var(--bg));
  scroll-behavior:smooth;
}
a{color:var(--accent);text-decoration:none}

/* Header */
header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(130%) blur(10px);background:rgba(3,6,10,.55);border-bottom:1px solid #142435}
.wrap{max-width:var(--wrap);margin:0 auto;padding:0 18px}
.header-line{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0}
.logoTitle{font-weight:900;letter-spacing:.6px;color:#cfe9ff;text-transform:uppercase;white-space:nowrap}

/* Buttons */
.btn{position:relative;display:inline-flex;align-items:center;gap:10px;padding:12px 18px;border-radius:14px;border:1px solid #173245;background:linear-gradient(90deg,#66e1ff,#22c55e);color:#041018;font-weight:800;letter-spacing:.2px;box-shadow:var(--shadow);cursor:pointer;overflow:hidden;transition:transform .25s ease,filter .25s ease}
.btn:hover{transform:translateY(-1px) scale(1.01);filter:saturate(1.1)}
.btn.ghost{background:transparent;color:var(--text)}
.btn::before{content:"";position:absolute;inset:-40% -20%;background:conic-gradient(from 0deg,#fff3,#0000 30%,#fff2 60%,#0000);transform:translateX(-100%);transition:transform .5s cubic-bezier(.2,.7,.2,1)}
.btn:hover::before{transform:translateX(0)}
.ripple{position:absolute;border-radius:50%;transform:scale(0);background:#fff5;animation:ripple .6s ease-out;pointer-events:none}
@keyframes ripple{to{transform:scale(12);opacity:0}}

/* Section reveal */
section{opacity:0;transform:translateY(18px);transition:opacity .6s cubic-bezier(.2,.7,.2,1),transform .6s cubic-bezier(.2,.7,.2,1);margin:70px 0}
section.visible{opacity:1;transform:translateY(0)}

/* === HERO full-bleed === */
.hero-bleed{
  width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw);
  min-height:92vh; display:grid; place-items:center; position:relative; overflow:hidden;
}
.hero-bg{position:absolute; inset:0; z-index:0; overflow:hidden}
.hero-bg .img{position:absolute; inset:-4% -2%; background:url("assets/hero-bg.jpg") center/cover no-repeat; filter:brightness(.55) saturate(1.08); transform:translateZ(0)}
.hero-bg::after{
  content:""; position:absolute; inset:0;
  background:
   radial-gradient(60% 40% at 22% 10%, rgba(102,225,255,.25), transparent 60%),
   radial-gradient(60% 40% at 80% 12%, rgba(34,197,94,.18), transparent 60%),
   linear-gradient(180deg, rgba(3,6,10,.05), rgba(3,6,10,.65));
}
#neuronsCanvas{position:absolute; inset:0; z-index:1; pointer-events:none; filter:drop-shadow(0 0 12px rgba(102,225,255,.6))}
.hero-inner{position:relative; z-index:3; text-align:center; padding:0 18px; max-width:1100px}
h1{font-size:clamp(34px,4.2vw,56px); line-height:1.05; margin:0 0 12px}
.sub{font-size:18px;color:#cfe3ff}
.hero-cta{display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:18px}

/* Floating faces (mobile) */
.mobile-faces{position:absolute; inset:0; z-index:2; pointer-events:none; display:none}
.mobile-faces .face{
  position:absolute; width:24vw; max-width:130px; aspect-ratio:1/1; border-radius:50%;
  overflow:hidden; opacity:.7; mix-blend-mode:screen;
  filter:brightness(.9) saturate(1.1) drop-shadow(0 8px 24px rgba(0,0,0,.6));
  animation:floatY 9s ease-in-out infinite;
}
.mobile-faces .face img{width:100%; height:100%; object-fit:cover; transform:scale(1.08)}
.mobile-faces .f1{left:6vw; top:12vh; animation-duration:10s}
.mobile-faces .f2{right:8vw; top:24vh; animation-duration:12s; animation-delay:-2s}
.mobile-faces .f3{left:14vw; bottom:10vh; animation-duration:11s; animation-delay:-1s}
@keyframes floatY{0%{transform:translateY(0)}50%{transform:translateY(-14px)}100%{transform:translateY(0)}}

/* Cards */
.cards{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
.card{background:linear-gradient(180deg,#0b131b,#0a1118);border:1px solid #142435;border-radius:var(--rad);padding:18px;box-shadow:var(--shadow);transition:transform .25s ease, box-shadow .25s ease}
.card h3{margin-top:0}
.card:hover{transform:translateY(-3px) rotateX(2deg) rotateY(-1deg); box-shadow:0 20px 50px rgba(0,0,0,.5)}

/* Gallery / Carousel */
.gallery h2{margin-bottom:14px}
.carousel{position:relative}
.track{transition:transform .35s ease}
.slide{min-height:260px}

/* video card */
.imgcard{position:relative;overflow:hidden;border-radius:var(--rad);border:1px solid #142435;background:#081018;min-height:260px}
.imgcard video,.imgcard img{width:100%;height:100%;object-fit:cover;display:block}
.poster{position:absolute;inset:0;background:#0a121a;display:flex;align-items:center;justify-content:center}
.poster img{width:100%;height:100%;object-fit:cover;filter:brightness(.95) saturate(1.05)}
.controls{position:absolute;left:12px;bottom:12px;display:flex;gap:8px;z-index:5}
.ctrl{padding:8px 10px;border-radius:12px;border:1px solid #173245;background:#0c1620;color:#eaf2ff;font-weight:800;cursor:pointer}
.ctrl.active, .sound.active{background:linear-gradient(90deg,#66e1ff,#22c55e);color:#041018}
.sound{position:absolute;right:12px;bottom:12px;z-index:5;padding:8px 10px;border-radius:12px;border:1px solid #173245;background:#0c1620;color:#eaf2ff;font-weight:800}

/* carousel nav */
.nav{position:absolute;top:50%;transform:translateY(-50%);z-index:6;border:1px solid #173245;background:#0c1620;color:#eaf2ff;border-radius:12px;padding:10px 12px;cursor:pointer}
.nav.prev{left:8px} .nav.next{right:8px}
.dots{display:flex;gap:6px;justify-content:center;margin-top:10px}
.dot{width:8px;height:8px;border-radius:50%;background:#274357}
.dot.active{background:linear-gradient(90deg,#66e1ff,#22c55e)}

/* Desktop layout for carousel (grid 2×2) */
@media (min-width:769px){
  .carousel{overflow:visible}
  .track{display:grid;grid-template-columns:repeat(2,1fr);gap:18px; transform:none !important}
  .slide{width:auto}
  .nav,.dots{display:none}
}

/* Mobile */
@media (max-width:1024px){ .hero-bleed{min-height:86vh} }
@media (max-width:768px){
  header .header-actions{display:none}
  .burger{display:inline-flex;z-index:60}
  .logoTitle{font-size:12px;letter-spacing:.2px;max-width:48vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .hero-bleed{min-height:64vh}
  .mobile-faces{display:block}
  h1{font-size:clamp(24px,6vw,34px)}
  .sub{font-size:14px}
  .cards{grid-template-columns:1fr}
  .btn{padding:8px 12px;border-radius:12px;font-weight:700}
  .btn::before{display:none}
  .fab{right:12px;bottom:12px;padding:12px 14px}
  /* slider mode */
  .track{display:flex}
  .slide{min-width:100%; padding:2px}
  .carousel{overflow:hidden}
}

footer{border-top:1px solid #142435;padding:30px 0;color:#8aa0bb;text-align:center}
.fab{position:fixed;right:18px;bottom:18px;z-index:60;display:inline-flex;align-items:center;gap:10px;padding:14px 18px;border-radius:999px;background:linear-gradient(90deg,#66e1ff,#22c55e);color:#041018;font-weight:900;border:1px solid #173245;box-shadow:0 12px 30px #0008;animation:breathe 2.8s ease-in-out infinite}
@keyframes breathe{0%{transform:translateY(0)}50%{transform:translateY(-1px)}100%{transform:translateY(0)}}
a:focus,button:focus{outline:2px solid #5ae0ff;outline-offset:2px;border-radius:12px}
</style>
</head>

<body>
<header>
  <div class="wrap header-line">
    <div class="logoTitle">DEMAKOV_AI_AVATAR</div>
    <div class="header-actions">
      <a class="btn ghost" href="#advantages"><span>Преимущества</span></a>
      <a class="btn ghost" href="#pricing"><span>Тарифы</span></a>
      <a class="btn" href="https://t.me/demakovmikhail" target="_blank" rel="noopener"><span>Связаться в TG</span></a>
    </div>
    <button class="burger" aria-controls="navDrawer" aria-expanded="false" aria-label="Открыть меню">
      <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      <span>Меню</span>
    </button>
  </div>
</header>

<div id="navDrawer" class="nav-drawer" aria-hidden="true">
  <div class="backdrop"></div>
  <nav class="panel" role="menu">
    <a class="navlink" href="#advantages" role="menuitem">Преимущества</a>
    <a class="navlink" href="#gallery" role="menuitem">Визуал</a>
    <a class="navlink" href="#pricing" role="menuitem">Тарифы</a>
    <a class="navlink primary" href="https://t.me/demakovmikhail" target="_blank" rel="noopener" role="menuitem">Связаться в Telegram</a>
  </nav>
</div>

<!-- HERO -->
<section class="hero-bleed">
  <div class="hero-bg"><div class="img" id="heroImg"></div></div>
  <canvas id="neuronsCanvas" aria-hidden="true"></canvas>

  <!-- Парящие цифровые лица (мобайл) -->
  <div class="mobile-faces" aria-hidden="true">
    <div class="face f1"><img src="assets/IMG_3630.jpeg" alt=""></div>
    <div class="face f2"><img src="assets/IMG_3631.jpeg" alt=""></div>
    <div class="face f3"><img src="assets/IMG_3630.jpeg" alt=""></div>
  </div>

  <div class="hero-inner">
    <h1>Цифровые клоны для быстрого и красивого контента</h1>
    <p class="sub">Аватар, сценарии, монтаж и сопровождение. Нейтральный голубой неон, 3D-ощущение и чистая типографика.</p>
    <div class="hero-cta">
      <a class="btn" href="#pricing"><span>Смотреть цены</span></a>
      <a class="btn" href="#gallery"><span>Визуал</span></a>
      <a class="btn" href="https://t.me/demakovmikhail" target="_blank" rel="noopener"><span>Заказать в Telegram</span></a>
    </div>
  </div>
</section>

<main class="wrap">
  <!-- Advantages -->
  <section id="advantages">
    <h2>Преимущества цифрового клона</h2>
    <div class="cards">
      <article class="card"><h3>Экономия времени</h3><p>15–30 роликов за цикл без повторных съёмок. Быстрое обновление текстов и CTA.</p></article>
      <article class="card"><h3>Стабильный образ</h3><p>Единый голос и визуал — контент ровный и узнаваемый, без «скачков» качества.</p></article>
      <article class="card"><h3>Снижение бюджета</h3><p>Меньше затрат на локации, реквизит и пересъём. Подписка и аватар окупаются тиражом.</p></article>
      <article class="card"><h3>Скорость релизов</h3><p>Параллельная генерация и чёткие дедлайны. Публикации выходят по плану.</p></article>
      <article class="card"><h3>Мультиязычность</h3><p>Озвучка и субтитры под RU/EN/TH и др. Вы легко расширяете охват.</p></article>
      <article class="card"><h3>Гибкость сценариев</h3><p>A/B-тесты форматов и офферов, отдельные версии под сегменты и площадки.</p></article>
    </div>
  </section>

  <!-- Gallery as carousel on mobile, grid on desktop -->
  <section id="gallery">
    <h2>Визуал оцифровки</h2>

    <div class="carousel" id="galleryCarousel">
      <div class="track">
        <!-- 1 -->
        <div class="slide">
          <div class="imgcard vidwrap"
               data-src1="assets/gallery-1.mp4?v=13" data-src2="assets/assets/gallery-1.mp4?v=13"
               data-poster1="assets/IMG_3630.jpeg" data-poster2="assets/assets/IMG_3630.jpeg">
            <video autoplay muted playsinline webkit-playsinline loop preload="metadata"></video>
            <div class="poster"><img alt="Превью 1"></div>
            <div class="controls">
              <button class="ctrl play">Пуск</button>
              <button class="ctrl pause">Пауза</button>
              <button class="ctrl stop">Стоп</button>
            </div>
            <button class="sound" type="button">Звук</button>
          </div>
        </div>

        <!-- 2 -->
        <div class="slide">
          <div class="imgcard vidwrap"
               data-src1="assets/gallery-2.mp4?v=13" data-src2="assets/assets/gallery-2.mp4?v=13"
               data-poster1="assets/IMG_3631.jpeg" data-poster2="assets/assets/IMG_3631.jpeg">
            <video autoplay muted playsinline webkit-playsinline loop preload="metadata"></video>
            <div class="poster"><img alt="Превью 2"></div>
            <div class="controls">
              <button class="ctrl play">Пуск</button>
              <button class="ctrl pause">Пауза</button>
              <button class="ctrl stop">Стоп</button>
            </div>
            <button class="sound" type="button">Звук</button>
          </div>
        </div>

        <!-- 3 -->
        <div class="slide">
          <div class="imgcard vidwrap"
               data-src1="assets/gallery-3.mp4?v=13" data-src2="assets/assets/gallery-3.mp4?v=13"
               data-poster1="assets/IMG_3632.jpeg">
            <video autoplay muted playsinline webkit-playsinline loop preload="metadata"></video>
            <div class="poster"><img alt="Превью 3"></div>
            <div class="controls">
              <button class="ctrl play">Пуск</button>
              <button class="ctrl pause">Пауза</button>
              <button class="ctrl stop">Стоп</button>
            </div>
            <button class="sound" type="button">Звук</button>
          </div>
        </div>

        <!-- 4 -->
        <div class="slide">
          <div class="imgcard vidwrap"
               data-src1="assets/gallery-4.mp4?v=13" data-src2="assets/assets/gallery-4.mp4?v=13"
               data-poster1="assets/IMG_3633.jpeg">
            <video autoplay muted playsinline webkit-playsinline loop preload="metadata"></video>
            <div class="poster"><img alt="Превью 4"></div>
            <div class="controls">
              <button class="ctrl play">Пуск</button>
              <button class="ctrl pause">Пауза</button>
              <button class="ctrl stop">Стоп</button>
            </div>
            <button class="sound" type="button">Звук</button>
          </div>
        </div>
      </div>

      <button class="nav prev" aria-label="Назад">‹</button>
      <button class="nav next" aria-label="Вперёд">›</button>
      <div class="dots" aria-hidden="true"></div>
    </div>
  </section>
</main>

<footer>
  <div class="wrap">© <span id="year"></span> DEMAKOV_AI_AVATAR. Все права защищены.</div>
</footer>

<a class="fab" href="https://t.me/demakovmikhail" target="_blank" rel="noopener" aria-label="Связаться в Telegram">Заказать в TG</a>

<script>
/* год в футере */
document.getElementById('year').textContent = new Date().getFullYear();

/* reveal */
const observer = new IntersectionObserver(entries=>{
  entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); observer.unobserve(e.target);} });
},{threshold:.12});
document.querySelectorAll('section').forEach(s=>observer.observe(s));

/* ripple */
document.querySelectorAll('.btn,.fab').forEach(btn=>{
  btn.addEventListener('click', (e)=>{
    const r = btn.getBoundingClientRect();
    const d = Math.max(r.width, r.height);
    const circle = document.createElement('span');
    circle.className='ripple';
    circle.style.width=circle.style.height=d+'px';
    circle.style.left=(e.clientX - r.left - d/2)+'px';
    circle.style.top=(e.clientY - r.top - d/2)+'px';
    btn.appendChild(circle); setTimeout(()=>circle.remove(), 600);
  });
});

/* burger */
(function(){
  const burger=document.querySelector('.burger'), drawer=document.getElementById('navDrawer');
  if(!burger||!drawer) return;
  const backdrop=drawer.querySelector('.backdrop'), links=drawer.querySelectorAll('a');
  const open=()=>{drawer.classList.add('open');burger.setAttribute('aria-expanded','true');drawer.setAttribute('aria-hidden','false');document.body.style.overflow='hidden'};
  const close=()=>{drawer.classList.remove('open');burger.setAttribute('aria-expanded','false');drawer.setAttribute('aria-hidden','true');document.body.style.overflow=''};
  burger.addEventListener('click',()=>drawer.classList.contains('open')?close():open());
  backdrop.addEventListener('click',close); links.forEach(a=>a.addEventListener('click',close));
  window.addEventListener('keydown',e=>{ if(e.key==='Escape') close(); });
})();

/* HERO parallax + neuron canvas */
(function(){
  const canvas=document.getElementById('neuronsCanvas'), ctx=canvas.getContext('2d');
  let W=0,H=0,DPR=Math.min(2,window.devicePixelRatio||1), nodes=[], links=65, mouse={x:0,y:0,active:false}, raf;
  const rand=(a,b)=>a+Math.random()*(b-a);
  function resize(){
    W=canvas.clientWidth=canvas.parentElement.clientWidth;
    H=canvas.clientHeight=canvas.parentElement.clientHeight;
    canvas.width=W*DPR; canvas.height=H*DPR; ctx.setTransform(DPR,0,0,DPR,0,0);
    const count=Math.min(120, Math.round((W*H)/23000));
    nodes.length=0; for(let i=0;i<count;i++) nodes.push({x:rand(0,W),y:rand(0,H),vx:rand(-.25,.25),vy:rand(-.25,.25),r:rand(1.2,2.6)});
  }
  function step(){
    ctx.clearRect(0,0,W,H);
    for(let i=0;i<nodes.length;i++){
      const a=nodes[i]; a.x+=a.vx; a.y+=a.vy; if(a.x<0||a.x>W)a.vx*=-1; if(a.y<0||a.y>H)a.vy*=-1;
      ctx.beginPath(); ctx.arc(a.x,a.y,a.r,0,Math.PI*2); ctx.fillStyle='rgba(102,225,255,.85)'; ctx.shadowColor='rgba(102,225,255,.6)'; ctx.shadowBlur=8; ctx.fill(); ctx.shadowBlur=0;
      for(let j=i+1;j<Math.min(i+links,nodes.length);j++){ const b=nodes[j],dx=a.x-b.x,dy=a.y-b.y,d=Math.hypot(dx,dy); if(d<120){ const o=1-d/120; ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.strokeStyle=`rgba(102,225,255,${0.15*o})`; ctx.lineWidth=1; ctx.stroke(); } }
    }
    if(mouse.active){ nodes.forEach(n=>{ n.x+=(mouse.x-n.x)*0.0008; n.y+=(mouse.y-n.y)*0.0008; }); }
    raf=requestAnimationFrame(step);
  }
  function parallax(e){
    const img=document.getElementById('heroImg');
    const xr=(e.clientX/window.innerWidth-.5)*8, yr=(e.clientY/window.innerHeight-.5)*8;
    img.style.transform=`translate(${xr}px,${yr}px) scale(1.03)`;
    mouse.x=e.clientX; mouse.y=e.clientY; mouse.active=true; clearTimeout(parallax._t); parallax._t=setTimeout(()=>mouse.active=false,150);
  }
  window.addEventListener('mousemove',parallax,{passive:true});
  window.addEventListener('resize',()=>{cancelAnimationFrame(raf); resize(); step();});
  resize(); step();
})();

/* VIDEO loader + controls (expose helpers on element) */
const videoHelpers = new WeakMap();
(function(){
  document.querySelectorAll('.vidwrap').forEach(w=>{
    const v=w.querySelector('video'), posterBox=w.querySelector('.poster'), posterImg=posterBox.querySelector('img');
    const btnMute=w.querySelector('.sound'), btnPlay=w.querySelector('.play'), btnPause=w.querySelector('.pause'), btnStop=w.querySelector('.stop');
    const srcs=[w.dataset.src1,w.dataset.src2].filter(Boolean);
    const posters=[w.dataset.poster1,w.dataset.poster2].filter(Boolean);
    if (posters.length) posterImg.src=posters[0];

    function ensureSource(){
      if (v.src) return;
      let i=0;
      function tryNext(){
        if(i>=srcs.length) return;
        v.src=srcs[i++]; v.load();
        const t=setTimeout(()=>{ if(v.readyState<2){ v.removeAttribute('src'); v.load(); tryNext(); } },1500);
        v.onloadeddata=()=>clearTimeout(t);
        v.onerror=()=>{ clearTimeout(t); v.removeAttribute('src'); v.load(); tryNext(); };
      }
      tryNext();
    }
    function safePlay(){ const p=v.play(); if(p && p.catch) p.catch(()=>{}); }
    function pause(){ v.pause(); }
    function stop(){ v.pause(); v.currentTime=0; }
    v.addEventListener('playing',()=>{ posterBox.style.display='none'; });

    btnMute.addEventListener('click',()=>{ v.muted=!v.muted; btnMute.classList.toggle('active', !v.muted); if(!v.paused) safePlay(); });
    btnPlay.addEventListener('click',()=>{ ensureSource(); safePlay(); btnPlay.classList.add('active'); setTimeout(()=>btnPlay.classList.remove('active'),200); });
    btnPause.addEventListener('click',()=>{ pause(); btnPause.classList.add('active'); setTimeout(()=>btnPause.classList.remove('active'),200); });
    btnStop.addEventListener('click',()=>{ stop(); btnStop.classList.add('active'); setTimeout(()=>btnStop.classList.remove('active'),200); });

    // expose
    videoHelpers.set(v,{ensureSource,safePlay,pause,stop});
  });
})();

/* CAROUSEL (mobile) */
(function(){
  const carousel=document.getElementById('galleryCarousel');
  const track=carousel.querySelector('.track');
  const slides=[...track.children];
  const prev=carousel.querySelector('.prev'), next=carousel.querySelector('.next');
  const dotsBox=carousel.querySelector('.dots');
  slides.forEach((_,i)=>{ const b=document.createElement('div'); b.className='dot'+(i===0?' active':''); b.addEventListener('click',()=>{index=i; update();}); dotsBox.appendChild(b); });
  let index=0, startX=null, delta=0;

  const isMobile=()=>window.matchMedia('(max-width:768px)').matches;

  function update(){
    const dots=[...dotsBox.children];
    if(isMobile()){
      track.style.transform=`translateX(${-index*100}%)`;
      dots.forEach((d,i)=>d.classList.toggle('active',i===index));
      slides.forEach((s,i)=>{
        const v=s.querySelector('video'); const h=videoHelpers.get(v);
        if(!h) return;
        if(i===index){ h.ensureSource(); h.safePlay(); }
        else { h.pause(); }
      });
    }else{
      dots.forEach(d=>d.classList.remove('active'));
      slides.forEach(s=>{ const v=s.querySelector('video'); const h=videoHelpers.get(v); if(h){ h.ensureSource(); h.safePlay(); } });
      track.style.transform='none';
    }
  }

  prev.addEventListener('click',()=>{ index=Math.max(0,index-1); update();});
  next.addEventListener('click',()=>{ index=Math.min(slides.length-1,index+1); update();});

  track.addEventListener('pointerdown',e=>{ if(!isMobile()) return; startX=e.clientX; delta=0; track.setPointerCapture(e.pointerId); track.style.transition='none'; });
  track.addEventListener('pointermove',e=>{ if(startX==null||!isMobile()) return; delta=e.clientX-startX; const w=track.clientWidth; track.style.transform=`translateX(${ -index*100 + (delta/w*100)}%)`; });
  const end=()=>{ if(startX==null||!isMobile()) return; track.style.transition='transform .35s ease'; if(Math.abs(delta)>track.clientWidth*0.18) index += (delta<0?1:-1); index=Math.max(0,Math.min(slides.length-1,index)); startX=null; delta=0; update(); };
  track.addEventListener('pointerup',end); track.addEventListener('pointercancel',end);

  window.addEventListener('resize',update);
  // kick
  update();
})();
</script>
</body>
</html>
